{"version":3,"file":"Zerg.js","sourceRoot":"","sources":["../../src/entity/Zerg.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,MAAM,EAAE,MAAM,gCAAgC,CAAC;AACxD,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AACzC,OAAO,EAAE,aAAa,EAAE,aAAa,EAAE,cAAc,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;AAC9F,OAAO,EAAE,YAAY,EAAE,MAAM,8BAA8B,CAAC;AAC5D,OAAO,EAAE,WAAW,EAAE,MAAM,gCAAgC,CAAC;AAC7D,OAAO,EAAE,QAAQ,EAAW,MAAM,cAAc,CAAC;AACjD,OAAO,EAAE,KAAK,EAAE,MAAM,uBAAuB,CAAC;AAM9C,MAAM,IAAK,SAAQ,WAAW;IAA9B;;QAEoB,SAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;IAOzC,CAAC;IALa,OAAO;QACb,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACzC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACzB,OAAO,EAAE,CAAC;IACd,CAAC;CACJ;AAED,MAAM,UAAU,MAAM,CAAC,QAAiB;IACpC,OAAO,QAAQ,IAAK,QAAiB,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,CAAC;AACjE,CAAC;AAED,MAAM,CAAC,MAAM,SAAS,GAAmB,UAAU,QAAoB,EACnE,gBAAwD,EACxD,gBAAwC,EACxC,eAA4D;IAE5D,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;IAExB,MAAM,IAAI,GAAG,MAAM,CAAC,qBAAqB,CAAC,aAAa,EAAE,aAAa,CAAC,CAAC;IACxE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,IAAI,IAAI,CAAC,CAAC;IAEtD,IAAI,CAAC,QAAQ,GAAG;QACZ,CAAC,EAAE,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,QAAQ,CAAC,KAAK,CAAC;QACzC,CAAC,EAAE,MAAM,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI;KACzD,CAAC;IAEF,MAAM,UAAU,GAAG;QACf,MAAM,EAAE,EAAE;QACV,QAAQ,EAAE,GAAG;QACb,QAAQ,EAAE,EAAE;KACf,CAAC;IACF,IAAI,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,aAAa,CAAC,cAAc,EAAE,cAAc,CAAC,EAAE,UAAU,EAAE,gBAAgB,CAAC,CAAC,CAAA;IAChH,IAAI,CAAC,KAAK,CAAC,IAAI,YAAY,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE;QACxC,gBAAgB,CAAC,IAAI,CAAC,CAAC;QACvB,eAAe,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IACrC,CAAC,CAAC,CAAC,CAAC;IAEJ,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IAEhE,OAAO,IAAI,CAAC;AAChB,CAAC,CAAA","sourcesContent":["import { IEntityFactory } from \"./IEntity.js\";\r\nimport { Random } from \"../engine/utils/RandomUtils.js\";\r\nimport { ZergAI } from \"../ai/ZergAI.js\";\r\nimport { ZERG_SIZE_MIN, ZERG_SIZE_MAX, ZERG_SPEED_MIN, ZERG_SPEED_MAX } from \"./constants.js\";\r\nimport { DamageableAI } from \"../engine/ai/DamageableAI.js\";\r\nimport { SceneObject } from \"../engine/scene/SceneObject.js\";\r\nimport { UnitType, IEntity } from \"./IEntity.js\";\r\nimport { Teams } from \"../scene/ZergScene.js\";\r\n\r\nexport interface IZerg extends IEntity {\r\n    kind: UnitType.zerg;\r\n}\r\n\r\nclass Zerg extends SceneObject implements IZerg {\r\n\r\n    public readonly kind = UnitType.zerg;\r\n\r\n    protected _create(): HTMLElement {\r\n        const el = document.createElement(\"div\");\r\n        el.classList.add(\"zerg\");\r\n        return el;\r\n    }\r\n}\r\n\r\nexport function isZerg(instance: unknown): instance is IZerg {\r\n    return instance && (instance as Zerg).kind === UnitType.zerg;\r\n} \r\n\r\nexport const spawnZerg: IEntityFactory = function( gameArea: ClientRect, \r\n    sceneObjectsFunc: () => ReadonlyArray<Readonly<IEntity>>,\r\n    removeObjectFunc: (obj: IEntity) => void,\r\n    adjustScoreFunc: (team: Teams, adjustment: number) => number): IEntity {\r\n\r\n    const zerg = new Zerg();\r\n\r\n    const size = Random.getRandomIntInclusive(ZERG_SIZE_MIN, ZERG_SIZE_MAX);\r\n    zerg.element.style.setProperty(\"--size\", `${size}px`);\r\n\r\n    zerg.position = { \r\n        x: Random.getRandomInt(0, gameArea.width), \r\n        y: Random.getRandomBool() ? 0 : gameArea.height - size\r\n    };\r\n\r\n    const zergAttack = { \r\n        damage: 34,\r\n        interval: 750,\r\n        distance: 10\r\n    };\r\n    zerg.addAI(new ZergAI(zerg, Random.getRandomReal(ZERG_SPEED_MIN, ZERG_SPEED_MAX), zergAttack, sceneObjectsFunc))\r\n    zerg.addAI(new DamageableAI(zerg, 100, () => {\r\n        removeObjectFunc(zerg);\r\n        adjustScoreFunc(Teams.player, 1);\r\n    }));\r\n\r\n    zerg.element.addEventListener(\"mousedown\", () => zerg.hit(100));\r\n\r\n    return zerg;\r\n}"]}