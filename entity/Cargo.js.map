{"version":3,"file":"Cargo.js","sourceRoot":"","sources":["../../src/entity/Cargo.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,gCAAgC,CAAC;AACxD,OAAO,EAAE,gBAAgB,EAAE,MAAM,kCAAkC,CAAC;AACpE,OAAO,EAAE,iBAAiB,EAAE,MAAM,kCAAkC,CAAC;AACrE,OAAO,EAAE,cAAc,EAAE,cAAc,EAAE,eAAe,EAAE,eAAe,EAAE,MAAM,gBAAgB,CAAC;AAClG,OAAO,EAAE,WAAW,EAAE,MAAM,gCAAgC,CAAC;AAC7D,OAAO,EAAE,YAAY,EAAE,MAAM,8BAA8B,CAAC;AAC5D,OAAO,EAAE,QAAQ,EAAW,MAAM,cAAc,CAAC;AAEjD,OAAO,EAAE,KAAK,EAAE,MAAM,uBAAuB,CAAC;AAM9C,MAAM,KAAM,SAAQ,WAAW;IAA/B;;QAEoB,SAAI,GAAG,QAAQ,CAAC,KAAK,CAAC;IAO1C,CAAC;IALa,OAAO;QACb,MAAM,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACzC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAC1B,OAAO,EAAE,CAAC;IACd,CAAC;CACJ;AAED,MAAM,UAAU,OAAO,CAAC,QAAiB;IACrC,OAAO,QAAQ,IAAK,QAAkB,CAAC,IAAI,KAAK,QAAQ,CAAC,KAAK,CAAC;AACnE,CAAC;AAED,MAAM,CAAC,MAAM,UAAU,GAAmB,UAAS,QAAoB,EACnE,gBAAwD,EACxD,gBAAwC,EACxC,eAA4D;IAE5D,MAAM,KAAK,GAAG,IAAI,KAAK,EAAE,CAAC;IAE1B,MAAM,IAAI,GAAG,MAAM,CAAC,qBAAqB,CAAC,cAAc,EAAE,cAAc,CAAC,CAAC;IAC1E,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,IAAI,IAAI,CAAC,CAAC;IACvD,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,eAAe,GAAG,OAAO,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,KAAK,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,KAAK,MAAM,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC;IAE5I,MAAM,cAAc,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;IAC3C,MAAM,YAAY,GAAG,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IAC/C,KAAK,CAAC,QAAQ,GAAG;QACb,CAAC,EAAE,CAAC;QACJ,CAAC,EAAE,MAAM,CAAC,qBAAqB,CAAC,cAAc,EAAE,YAAY,CAAC;KAChE,CAAC;IAEF,KAAK,CAAC,KAAK,CAAC,IAAI,gBAAgB,CAAC,KAAK,EAAE,MAAM,CAAC,aAAa,CAAC,eAAe,EAAE,eAAe,CAAC,EAAE,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;IAC1H,KAAK,CAAC,KAAK,CAAC,IAAI,YAAY,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE;QAC1C,gBAAgB,CAAC,KAAK,CAAC,CAAC;QACxB,eAAe,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IACpC,CAAC,CAAC,CAAC,CAAC;IAEJ,OAAO,KAAK,CAAC;AACjB,CAAC,CAAA","sourcesContent":["import { Random } from \"../engine/utils/RandomUtils.js\";\r\nimport { LinearMovementAI } from \"../engine/ai/LinearMovementAI.js\";\r\nimport { MovementDirection } from \"../engine/utils/MovementUtils.js\";\r\nimport { CARGO_SIZE_MIN, CARGO_SIZE_MAX, CARGO_SPEED_MIN, CARGO_SPEED_MAX } from \"./constants.js\";\r\nimport { SceneObject } from \"../engine/scene/SceneObject.js\";\r\nimport { DamageableAI } from \"../engine/ai/DamageableAI.js\";\r\nimport { UnitType, IEntity } from \"./IEntity.js\";\r\nimport { IEntityFactory } from \"./IEntity.js\";\r\nimport { Teams } from \"../scene/ZergScene.js\";\r\n\r\nexport interface ICargo extends IEntity {\r\n    kind: UnitType.cargo;\r\n}\r\n\r\nclass Cargo extends SceneObject implements ICargo {\r\n\r\n    public readonly kind = UnitType.cargo;\r\n\r\n    protected _create(): HTMLElement {\r\n        const el = document.createElement(\"div\");\r\n        el.classList.add(\"cargo\");\r\n        return el;\r\n    }\r\n}\r\n\r\nexport function isCargo(instance: unknown): instance is ICargo {\r\n    return instance && (instance as Cargo).kind === UnitType.cargo;\r\n} \r\n\r\nexport const spawnCargo: IEntityFactory = function(gameArea: ClientRect, \r\n    sceneObjectsFunc: () => ReadonlyArray<Readonly<IEntity>>,\r\n    removeObjectFunc: (obj: IEntity) => void,\r\n    adjustScoreFunc: (team: Teams, adjustment: number) => number): IEntity {\r\n\r\n    const cargo = new Cargo();\r\n\r\n    const size = Random.getRandomIntInclusive(CARGO_SIZE_MIN, CARGO_SIZE_MAX);\r\n    cargo.element.style.setProperty(\"--size\", `${size}px`);\r\n    cargo.element.style.backgroundColor = `rgb(${Random.getRandomInt(0, 256)}, ${Random.getRandomInt(0, 256)}, ${Random.getRandomInt(0, 256)})`;\r\n\r\n    const cargoLaneStart = gameArea.height / 3;\r\n    const cargoLaneEnd = (gameArea.height / 3) * 2;\r\n    cargo.position = { \r\n        x: 0,\r\n        y: Random.getRandomIntInclusive(cargoLaneStart, cargoLaneEnd) \r\n    };\r\n\r\n    cargo.addAI(new LinearMovementAI(cargo, Random.getRandomReal(CARGO_SPEED_MIN, CARGO_SPEED_MAX), MovementDirection.right));\r\n    cargo.addAI(new DamageableAI(cargo, 100, () => {\r\n        removeObjectFunc(cargo);\r\n        adjustScoreFunc(Teams.zergs, 1);\r\n    }));\r\n\r\n    return cargo;\r\n}"]}